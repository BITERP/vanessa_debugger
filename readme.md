# VS Code Vanessa Debug

## Как установить на компьютер пользователя?
* Установить на компьютер пользователя Node.JS
* Запустить `Vanessa Debugger Install.bat`
  * Он клонирует репозиторий, выкачивает все нужные библиотеки и собирает проект.
    Убедиться что все это сделано можно либо по логам, которые выводятся в bat-файл, либо
    посмотреть что по `%UserProfile%\.vscode\extensions` есть:
      * каталог `vanessa_debugger`, и он не пустой
      * каталог `vanessa_debugger/node_modules`и он не пустой (там нужные библиотеки)
      * каталог `vanessa_debugger/out` и он не пустой (там исполняемые js-файлы самого отладчика)
* После этого конечный пользователь может запускать отладку feture-файлов
  * Если запуск отладчика происходит первый раз для конкретного workspace, то скорее всего для этого
    workspace будет отсутвовать папка `.vscode`. А даже если она есть, то в ней должен быть файл `launch.json` c конфигурацией 'vanessa'. Если файла нет, или конфигурации нет, то можно или перекинуть туда подходящий из другого проекта (они одинаковые), или сделать самостоятельно.
    Для этого:
      * переключаемся на режим отладки (жмем в VS Code на кнопку с пауком)
      * Рядом с кнопкой запуска отладки видим выпадающее меню с конфигурациями отладчиков. Скорее всего вы увидите там надпись "Нет конфигурации". Нажимаем.
      * В выпадающем списке видим "Добавить конфигурацию...". Жмем.
      * Видим еще один выпадающий список, в котором перечислены среды отладки, о которых знает VS Code. Наш пункт "Vanessa Debug". Жмем.
      * Видим что VS Code создал для нас файл launch.json и записал туда все необходимое.
        **ВАЖНО!** В файле есть строка:
        ```${workspaceFolder}/${command:Run1CEnerprise}```
        Её нужно заменить на
        ```${command:Run1CEnerprise}```
      * Все, открывайте feature-файл, жмите F5. Отладчик Vanessa Debugger запустится.

## Как доработать отладчик?
* Склонируйте проект из [https://github.com/BITERP/vanessa_debugger.git]
* Находясь в папке проекта выполните
  ```npm install```
* Отройте папку проекта в VS Code
* Жмите F5. VS Code запустит еще одну копию VS Code, с как буд-то установленным отладчиком
* Уже в запущенной копии VS Code нужно открыть feature-файл и нажать F5.
  Отладчик запустится для отладки :)

### Полезные материалы:
  VS Code API [https://code.visualstudio.com/docs/extensionAPI/vscode-api]

### Консольный дебаггинг, если надо:
    console.debug(JSON.stringify(debugInfo))

